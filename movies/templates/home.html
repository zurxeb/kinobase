{% extends 'base.html' %}
{% load static %}

{% block title %}Home - Kinobase{% endblock %}

{% block content %}
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<h1 class="text-center">So'ngi Kino, Anime, Multfilm, Serialla</h1>

{% for category, movie_groups in categorized_movies.items %}
  <h2 class="text-center my-4">{{ category|capfirst }}</h2>
  <div id="carousel-{{ category }}" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">

      {% for group in movie_groups %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <div class="container">
            <div class="row">
              {% for movie in group %}
                <div class="col-md-4 d-flex justify-content-center">
                  <a href="{% url 'movies:movie_detail' movie.pk %}" style="text-decoration: none; color: inherit;">
                    <div class="card" style="width: 18rem;">
                      <img src="{{ movie.poster.url }}" class="card-img-top"
                           style="height: 300px; object-fit: cover;" alt="{{ movie.title }}">
                      <div class="card-body">
                        <h5 class="card-title text-center">{{ movie.title }}</h5>
                        <p class="card-text text-center">{{ movie.description|truncatewords:10 }}</p>
                      </div>
                    </div>
                  </a>
                </div>
              {% endfor %}
            </div>
          </div>
        </div>
      {% endfor %}

    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carousel-{{ category }}" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>

    <button class="carousel-control-next" type="button" data-bs-target="#carousel-{{ category }}" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
{% endfor %}




<h2 class="text-center my-4">Kinolar</h2>

<div class="row">
    {% for movie in movies %}
        {% if movie.category == 'kino' %}
        <div class="col-md-2 mb-4">

    <a href="{% url 'movies:movie_detail' movie.pk %}" style="text-decoration: none; color: inherit;">

                <div class="series-item">
                    <div class="card h-70">
                    <img style="width: 100%; height: 300px; object-fit: cover;" src="{{ movie.poster.url }}" alt="{{ movie.title }}" class="movie-img">
                    <div class="series-info text-center">
                        <h5 class="card-title">{{ movie.title }}</h5>
                        <div class="rating">
                            {% for i in "12345" %}
                                {% if i|add:"0" <= movie.rating %}
                                    <span>⭐</span>
                                {% endif %}
                            {% endfor %}
                            {% for i in "12345" %}
                                {% if i|add:"0" > movie.rating %}
                                    <span>⭐</span>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <p class="card-text">{{ movie.year }}</p>
                    </div>
                </div>
                </div>
            </a>

        </div>
        {% if forloop.counter|divisibleby:6 and not forloop.last %}
            </div><div class="row">
        {% endif %}
        {% endif %}

    {% endfor %}
</div>

<h2 class="text-center my-4">Animelar</h2>
<div class="row">
    {% for movie in movies %}
        {% if movie.category == 'anime' %}
        <div class="col-md-2 mb-4">

    <a href="{% url 'movies:movie_detail' movie.pk %}" style="text-decoration: none; color: inherit;">

                     <div class="series-item">
                    <div class="card h-70">
                    <img style="width: 100%; height: 300px; object-fit: cover;" src="{{ movie.poster.url }}" alt="{{ movie.title }}" class="movie-img">
                    <div class="series-info text-center">
                        <h5 class="card-title">{{ movie.title }}</h5>
                        <div class="rating">
                            {% for i in "12345" %}
                                {% if i|add:"0" <= movie.rating %}
                                    <span>⭐</span>
                                {% endif %}
                            {% endfor %}
                            {% for i in "12345" %}
                                {% if i|add:"0" > movie.rating %}
                                    <span>⭐</span>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <p class="card-text">{{ movie.year }}</p>
                    </div>
                </div>
                </div>
            </a>

        </div>
        {% if forloop.counter|divisibleby:6 and not forloop.last %}
            </div><div class="row">
        {% endif %}
     {% endif %}

    {% endfor %}
</div>

<h2 class="text-center my-4">Multfilmlar</h2>
<div class="row">
    {% for movie in movies %}
        {% if movie.category == 'multfilm' %}
        <div class="col-md-2 mb-4">

    <a href="{% url 'movies:movie_detail' movie.pk %}" style="text-decoration: none; color: inherit;">


                     <div class="series-item">
                    <div class="card h-70">

                    <img style="width: 100%; height: 300px; object-fit: cover;" src="{{ movie.poster.url }}" alt="{{ movie.title }}" class="movie-img">
                    <div class="series-info text-center">
                        <h5 class="card-title">{{ movie.title }}</h5>
                        <div class="rating">
                            {% for i in "12345" %}
                                {% if i|add:"0" <= movie.rating %}
                                    <span>⭐</span>
                                {% endif %}
                            {% endfor %}
                            {% for i in "12345" %}
                                {% if i|add:"0" > movie.rating %}
                                    <span>⭐</span>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <p class="card-text">{{ movie.year }}</p>
                    </div>
                </div>
                </div>
            </a>

        </div>
        {% if forloop.counter|divisibleby:6 and not forloop.last %}
            </div><div class="row">
        {% endif %}
        {% endif %}

    {% endfor %}
</div>

<h2 class="text-center my-4">Serialar</h2>
<div class="row">
    {% for movie in movies %}
        {% if movie.category == 'serial' %}
        <div class="col-md-2 mb-4">

    <a href="{% url 'movies:movie_detail' movie.pk %}" style="text-decoration: none; color: inherit;">


                     <div class="series-item">
                    <div class="card h-70">
                    <img style="width: 100%; height: 300px; object-fit: cover;" src="{{ movie.poster.url }}" alt="{{ movie.title }}" class="movie-img">
                    <div class="series-info text-center">
                        <h5 class="card-title">{{ movie.title }}</h5>
                        <div class="rating">
                            {% for i in "12345" %}
                                {% if i|add:"0" <= movie.rating %}
                                    <span>⭐</span>
                                {% endif %}
                            {% endfor %}
                            {% for i in "12345" %}
                                {% if i|add:"0" > movie.rating %}
                                    <span>⭐</span>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <p class="card-text">{{ movie.year }}</p>
                    </div>
                </div>
                </div>
            </a>

        </div>
        {% if forloop.counter|divisibleby:6 and not forloop.last %}
            </div><div class="row">
        {% endif %}
     {% endif %}

    {% endfor %}
</div>

{% endblock %}
